<Page x:Class="UnityHub.ProjectsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      Title="项目页面">

    <Grid Width="1080">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 项目页面标题和按钮 -->
        <Grid Grid.Row="0" Margin="20,20,20,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" 
               Text="我的项目" 
               FontSize="24" 
               FontWeight="Bold"
               Foreground="{ui:ThemeResource TextFillColorPrimaryBrush}"/>

            <ui:Button Grid.Column="1" 
                       Content="添加项目" 
                       Icon="{ui:SymbolIcon Add24}"
                       Appearance="Primary"
                       Command="{Binding AddProjectCommand}"/>
        </Grid>

        <!-- 项目列表 -->
        <ScrollViewer Grid.Row="1" 
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled"
                      Margin="20,0,20,20">
            <ItemsControl x:Name="ProjectsList" ItemsSource="{Binding Projects}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <ui:Card Margin="0,0,0,10" Padding="15">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <ui:SymbolIcon Grid.Column="0" 
                                               Symbol="Home24" 
                                               Margin="0,0,15,0"/>
                                
                                <StackPanel Grid.Column="1">
                                    <TextBlock Text="{Binding Name}" 
                                               FontWeight="Bold" 
                                               FontSize="16"/>
                                    <TextBlock Text="{Binding Path}" 
                                               Foreground="Gray" 
                                               Margin="0,5,0,0"/>
                                    <TextBlock Text="{Binding UnityVersion}" 
                                               Foreground="LightBlue" 
                                               Margin="0,5,0,0"/>
                                </StackPanel>
                                
                                <StackPanel Grid.Column="2" 
                                            Orientation="Horizontal">
                                    <ui:Button Content="打开" 
                                               Margin="0,0,5,0"
                                               Appearance="Primary"
                                               Command="{Binding DataContext.OpenProjectCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                                               CommandParameter="{Binding}"/>
                                    <ui:Button Content="在资源管理器中显示" 
                                               Appearance="Secondary"
                                               Command="{Binding DataContext.ShowInExplorerCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                                               CommandParameter="{Binding}"/>
                                </StackPanel>
                            </Grid>
                        </ui:Card>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</Page>
